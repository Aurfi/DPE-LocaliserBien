#!/usr/bin/env sh

echo "üîç Running pre-commit checks..."

# Run linter
echo "üìù Checking code style with Biome..."
npm run lint || {
  echo "‚ùå Linting failed! Please fix the issues above."
  exit 1
}

# Check for sensitive data (API keys only)
echo "üîí Checking for API keys..."
if grep -r "AIzaSy" --include="*.js" --include="*.vue" --include="*.ts" --exclude-dir=node_modules --exclude-dir=dist src/ 2>/dev/null; then
  echo "‚ùå Error: Google Maps API key found in source code!"
  echo "Please remove API keys from source files and use environment variables instead."
  exit 1
fi

echo "‚úÖ Pre-commit checks passed!"